<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>üìù –í–≤–æ–¥ –ø–æ–∫–∞–∑–∞–Ω–∏–π —Å—á–µ—Ç—á–∏–∫–æ–≤</h1>
        <nav>
            <a href="history.html" class="nav-link nav-link-light">üìä –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑–∞–Ω–∏–π</a>
            <a href="tariffs.html" class="nav-link nav-link-light">üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏</a>
            
        </nav>
    </header>
    <main>
        <!-- –§–∏–ª—å—Ç—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞ -->
        <div class="filter-container">
            <div class="filter-row">
                <div class="filter-item">
                    <label for="citySelect">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥:</label>
                    <select id="citySelect" class="filter-select">
                        <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </select>
                </div>
            </div>
        </div>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã -->
        <div class="table-container">
            <table class="meter-table">
                <thead>
                    <tr>
                        <th>–¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞</th>
                        <th>–î–∞—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π</th>
                        <th>–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è</th>
                        <th>–î–∞—Ç–∞ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∫–∞–∑–∞–Ω–∏–π</th>
                        <th>–ü–æ–∫–∞–∑–∞–Ω–∏—è</th>
                        <th>–†–∞—Å—Ö–æ–¥</th>
                        <th>–°—É–º–º–∞</th>
                    </tr>
                </thead>
                <tbody id="meterTableBody">
                    <!-- –°—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </tbody>
            </table>
        </div>
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ -->
        <div class="button-container">
            <button id="calculateButton" class="btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            <button id="saveButton" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="printButton" class="btn">–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É</button>
        </div>
        <!-- –ë–ª–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã -->
        <div id="totalAmount" class="total-amount"></div>
    </main>

    <!-- –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —á–∞—Ç-–±–æ—Ç–∞ -->
    <link href="https://chat.autofaq.ai/widget/static/css/main.css" rel="stylesheet">
    <script 
       data-widget-host="https://chat.autofaq.ai"
       data-widget-service-id="f0885e3f-aa26-4eff-b501-c7f365572b69"
       data-widget-channel-id="e4d28901-8339-4c9a-a83d-5cc88b2700da"
       data-widget-user-login="default"
       data-widget-user-name=""
       data-widget-user-email=""
              src="https://chat.autofaq.ai/widget/static/js/main.js"
       id="autofaqWidget"></script>

    <!-- Appwrite SDK -->
    <script src="https://cdn.jsdelivr.net/npm/appwrite@11.0.0"></script>
    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Appwrite -->
    <script src="appwrite-config.js"></script>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
    <script src="script-appwrite.js"></script>
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É Appwrite SDK
        window.addEventListener('load', function() {
            console.log('=== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–ì–†–£–ó–ö–ò ===');
            console.log('Appwrite SDK –∑–∞–≥—Ä—É–∂–µ–Ω:', typeof Appwrite !== 'undefined');
            
            if (typeof Appwrite === 'undefined') {
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Appwrite SDK');
                console.error('Appwrite SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            } else {
                console.log('Appwrite SDK –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Å—ã:', Object.keys(Appwrite));
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:');
            console.log('DATABASE_ID:', typeof DATABASE_ID !== 'undefined' ? DATABASE_ID : '–ù–ï –û–ü–†–ï–î–ï–õ–ï–ù');
            console.log('CITIES_COLLECTION_ID:', typeof CITIES_COLLECTION_ID !== 'undefined' ? CITIES_COLLECTION_ID : '–ù–ï –û–ü–†–ï–î–ï–õ–ï–ù');
            console.log('METER_READINGS_COLLECTION_ID:', typeof METER_READINGS_COLLECTION_ID !== 'undefined' ? METER_READINGS_COLLECTION_ID : '–ù–ï –û–ü–†–ï–î–ï–õ–ï–ù');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π origin
            console.log('–¢–µ–∫—É—â–∏–π origin:', window.location.origin);
            console.log('–¢–µ–∫—É—â–∏–π URL:', window.location.href);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
            const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
            console.log('–ó–∞–ø—É—â–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:', isLocalhost);
            
            if (!isLocalhost) {
                console.warn('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –ª–æ–∫–∞–ª—å–Ω–æ!');
                console.warn('–≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å CORS –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Appwrite.');
                console.warn('–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ http://localhost:8081');
            }
        });
    </script>
</body>
</html>